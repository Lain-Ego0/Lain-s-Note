项目链接：https://github.com/HighTorque-Robotics/Mini-Pi-Plus_BeyondMimic

GMR:https://arxiv.org/abs/2510.02252

https://jaraujo98.github.io/retargeting_matters/



四足机器人高程图跳跃 sim2sim:cnn＋多头(参考eth)

Attention-Based Map Encoding for Learning Generalized Legged Locomotion



四足系统设计：（保持原计划）

1.单腿四自由度+舵向 舵向单自由度锁死处理

2.基础的迁移处理已跑通

3.暂时使用打印件替代  使用板件链接，销钉+304螺丝

4.强度件与外部装饰零件分开



传统位控处理：
```c
void counter_motion(float X,float Y,float *range1, float *range2)
{
	float L = sqrtf(X*X + Y*Y);// 虚腿长
	float L1 = 250.0f;// 上腿长
	float L2 = 250.0f;// 下腿长
    float theta1 = 3.1415f - acosf((L1*L1 + L2*L2 - L*L)/(2*L1*L2));
	float phi1 = atan2f(-X, Y);
	float phi2 = acosf((L*L + L1*L1 - L2*L2)/(2*L*L1));
	float theta2 = phi2 + phi1;
	*range1 = -theta1*6.33f;// 小腿
	*range2 = theta2*6.33f;// 大腿
}
```



设置规划变量:
```c
int leg_high;//站立高度
int leg_high_tai_tui;//抬腿高度
int start_point;//起点 
int step_long;//步长
int step_rate;//控制单腿轨迹周期时长
int step_cycle;//TROT控制周期时长
```

```c
//落腿阶段（支撑相）
			if(((time_currently == 0)||(time_currently > 0))&&((time_currently<Tm)||(Tm == time_currently)))
			{
				*X = start_point - step_long*((float)time_currently/Tm) ;// 足端沿直线向后运动，准备向前摆动
				*Y = leg_high;
			}
			else//抬腿阶段（摆动相）
			{
				*X =   -start_point  +   step_long*((float)time_currently/Tm-1.0f - 0.1591f*sin(6.283f*((float)time_currently/Tm - 1.0f)));// 足端沿摆线路径向前运动，提供推进力
				*Y =   leg_high  -   leg_high_tai_tui*(0.5f - 0.5f*cos(6.283f*((float)time_currently/Tm - 1.0f)));
			}
            // 步幅转向控制
			if((rc_rc.ch0 > 0)||(step_turn_flag))// 右
			{
				step_turn_flag = 1;
				if(((direction_mode ==3))&&step_turn_flag)// 4-5
				{
					//步幅转向系数step_turn_k*rc_rc.ch0  0---0.5
					*X = (*X)*( 0.91f - step_turn_k*rc_rc.ch0);
				}
				if(((direction_mode ==4))&&step_turn_flag)// 8-9
				{
					*X = (*X)*1.09f ;
				}
			}
			if((rc_rc.ch0 < 0)||(step_turn_flag))// 左
			{
				step_turn_flag = 1;
				if(((direction_mode ==3))&&step_turn_flag)// 4-5
				{
					*X = *X ;
				}
				if(((direction_mode ==4))&&step_turn_flag)// 8-9
				{
					//步幅转向系数step_turn_k*rc_rc.ch0  0---0.5
					*X = (*X)*( 1.0f - step_turn_k*( - rc_rc.ch0));
				}
			}
```



单腿四自由度处理：





