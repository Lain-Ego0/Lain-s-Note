# 项目细节解释

## VMC算法



主要参考论文:四足机器人对角小跑步态虚拟模型直觉控制方法研究_谢惠祥

虚拟模型控制算法，也就是VMC算法，是一种直觉控制方法，其核心思想是利用虚拟的机械部件（如弹簧、阻尼器、轴承，或者其他任何可以想象的组件）连接机器人内部作用点或者连接作用点与外部环境，产生虚拟力来驱动机器人实现运动，但是虚拟力不是实际执行机构的作用力或力矩，故需要通过雅可比矩阵将虚拟力转换到具体的执行机构上，从而计算出期望的关节力矩作为关节控制的输入，只不过真实关节的扭矩所产生力的效果与虚拟力产生的效果相同，均可驱使机器人按照期望运动。VMC的优势在于它简化了复杂动态系统的控制：用户可以直观地设计虚拟力，而不需要深入处理底层动态方程，从而使得传统方法难以描述的复杂任务可以用简单的虚拟模型轻松描述

例如希望机器人在一个未知的平面上施加冲击（如敲门），这实际上是一个很难使用数学描述的任务，但是如果使用VMC算法，只需要将虚拟的弹簧、阻尼器和一个有给定动能的虚拟质量附着在机器人手上，机器人的手在虚拟组件集合的作用下移动，对未知平面产生预期冲击之后，虚拟质量在虚拟弹簧阻尼器的作用下反弹了回来

再以足式机器人的二自由度单腿结构为例，其结构可简化为下图的形式，A、B两个转动副可以由电机驱动，对应的角度可以通过电机编码器测量出，两个连杆的长度 $$L_1$$ 和 $$L_2$$ 可以通过机械参数直接获取，控制任务主要是关注机构末端或者说足端 C 点的位置，位置可以使用直角坐标或者极坐标表示

<img src="./assets/35800694-9a97-4196-8df3-27220afc9385.png" alt="35800694-9a97-4196-8df3-27220afc9385" style="zoom:50%;" />

<img src="./assets/f8f2cb33-27f7-4e3f-8063-792615160a36.png" alt="f8f2cb33-27f7-4e3f-8063-792615160a36" style="zoom:50%;" />

VMC 方法是直觉控制方法中的典型代表，其特点是不需要进行机器人的逆运动学求解，综合考虑了机器人的机身高度、姿态和前进速度等，较为简单易控，极大提高了计算效率，控制效率较高。

VMC 的应用关键在于两点：一是在每个需要控制的自由度上构造恰当的虚拟构件以产生合适的虚拟力；二是在不同的相位状态利用相应的雅可比矩阵计算期望的关节力矩。

虚拟力并不是实际存在的作用力，而是假想的力，机器人的实际运动是靠各个关节的扭矩实现的，为了建立虚拟力与关节扭矩之间的关系，需要先将工作空间中的力或者力矩映射到关节空间下的关节力矩，这一步可以先通过正运动学模型获取空间映射关系，也就是将关节空间向量映射到工作空间向量上去

$$
\mathbf x=f(\mathbf q),其中\mathbf x=[x_1,\cdots,x_m],\mathbf q=[q_1,\cdots,q_n]
$$

其中的 x 是机器人坐标系相对于地面坐标系的 m 个自由度对应的位姿向量，这组向量必须完全描述系统的构型，在常用直角坐标系下可描述为坐标向量，q 为 n 个关节变量的位置向量，对于转动关节其对应关节的转动角度，对于移动关节其对应关节的位移

如果对其进行求导，就是雅可比矩阵，也就是一阶微分运动学和静力学部分的理论

注意一下，雅可比矩阵并不是一个固定不变的矩阵，其会随着关节角度的变化而变化